
function ajaxRequest(url_arg, method_arg, data_arg, success_func){
	$.ajax({
		url: url_arg,
		method: method_arg,
		data: data_arg,
		cache: false
	}).done(function(result){
		var json = JSON.parse(result);
		if (json.error) errorShow(json.error);
		else success_func();
	});
}

$(document).ready(function(){
	// Active link
	var location_pathname = window.location.pathname;

	$('li.nav-item').each(function(){
		$(this).removeClass('active');
		var href = $(this).children().attr('href');
		if(location_pathname == href) $(this).addClass('active');
	});
});


// Logout
$(document).on('click', '.logout_btn', function(){
	swal({
		title: 'Do you really want to log out?',
		icon: 'warning',
		buttons: true,
		dangerMode: true,
		buttons: ["Nope", "Yep"],
	})
	.then((willDelete) => {
		if (willDelete) {
			ajaxRequest('/', 'POST', 'logout', function(){
				window.location.replace("/");
			});
		}
	});
});
